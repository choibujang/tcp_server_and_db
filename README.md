# π§  μ‹¤μ‹κ°„ TCP μ„λ²„ & DB
μ΄ λ¦¬ν¬μ§€ν† λ¦¬λ” μ—¬λ¬ μ¥μΉμ—μ„ μ „μ†΅ν•λ” JSON ν•μ‹μ μ”μ²­μ„ TCP μ„λ²„κ°€ μ‹¤μ‹κ°„μΌλ΅ μμ‹ ν•κ³ ,  
κ° μ΄λ²¤νΈμ— λ”°λΌ κ΄€λ ¨ μ—”ν„°ν‹°μ μƒνƒλ¥Ό κ°±μ‹ ν• λ’¤, μ΄λ²¤νΈ μ ν•μ— λ”°λΌ μ¦‰μ‹ λλ” μΌμ • κ°„κ²©μΌλ΅ λ°μ΄ν„°λ¥Ό DBμ— μ €μ¥ν•λ” μ‹μ¤ν…μ…λ‹λ‹¤.

## π“΅ ν†µμ‹  ν”„λ΅ν† μ½
| μ΄λ²¤νΈ           | μƒμ„Έ                                  | μμ‹ JSON                                                                    |
| ------------- | ----------------------------------- | -------------------------------------------------------------------------- |
| κ³ κ° μ…μ¥         | κ³ κ°μ΄ λ§¤μ¥μ— μ…μ¥ν•¨μ„ μΉ΄λ©”λΌλ΅ μΈμ‹ν•κ³  λ°©λ¬Έ κΈ°λ΅μ„ μƒμ„±    | `{ "camera_id": "Face", "member_id": 1, "action": "visit" }`               |
| κ²°μ  μ „ μΉ΄νΈ ν™•μΈ    | κ³ κ°μ΄ κ²°μ λ€ μΉ΄λ©”λΌμ— μ–Όκµ΄μ„ μΈμ‹μ‹μΌ κ²°μ  μ¤€λΉ„λ¥Ό μ”μ²­ν•¨    | `{ "camera_id": "Face", "member_id": 1, "action": "purchase" }`            |
| κ²°μ  μΉμΈ         | κ³ κ°μ΄ λ¬Όν’ λ©λ΅μ„ ν™•μΈν• ν›„ 'μ' λ²„νΌμ„ λλ¬ κµ¬λ§¤λ¥Ό ν™•μ •ν•¨ | `{ "camera_id": "Face", "member_id": 1, "action": "yes" }`                 |
| μΉ΄νΈμ— λ‹΄κΈ΄ λ¬Όν’ λ°μ΄ν„° | μ¥λ°”κµ¬λ‹λ³„ κ³ΌμΌ μ •λ³΄ λ©λ΅μ„ μ „μ†΅ν•μ—¬ μ¥λ°”κµ¬λ‹ μƒνƒλ¥Ό μ—…λ°μ΄νΈν•¨  | `{ "camera_id": "Cart", "data": [ { "cart_cam": 1, "fruits": [...] } ] }`  |
| λ§¤λ€μ— λ†“μΈ λ¬Όν’ λ°μ΄ν„° | λ§¤λ€μ— μ§„μ—΄λ κ³ΌμΌμ ν„μ¬ μ¬κ³  μƒνƒλ¥Ό μ—…λ°μ΄νΈν•¨     | `{ "camera_id": "Fruit", "data": [ { "fruit_id": 1, "stock": 3 }, ... ] }` |

## π—„οΈ λ°μ΄ν„°λ² μ΄μ¤
![DB](./assets/db.png)

## π’΅ λ©”λ¨λ¦¬ κ°μ²΄ κΈ°λ° μƒνƒ κ΄€λ¦¬

μ΄ μ‹μ¤ν…μ€ λ¨λ“  μ£Όμ” μ—”ν„°ν‹°(Visitor, Cart, Fruit)λ¥Ό **ν΄λμ¤ ν•νƒμ λ©”λ¨λ¦¬ κ°μ²΄λ΅ ν•­μƒ μ μ§€**ν•©λ‹λ‹¤.

- μ΄λ²¤νΈκ°€ λ°μƒν•λ©΄ DBλ¥Ό μ΅°νν•μ§€ μ•κ³  **κ°μ²΄ μƒνƒλ¥Ό κΈ°μ¤€μΌλ΅ μ²λ¦¬**
- μ΄λ¥Ό ν†µν•΄ **μ§€μ—° μ—†μ΄ μ‹¤μ‹κ°„ λ°μ‘**μ΄ κ°€λ¥ν•λ©°,  
  λ°λ³µ μ΅°νλ΅ μΈν• **DB λ¶€ν•λ¥Ό μµμ†ν™”**ν•©λ‹λ‹¤.

## π’Ύ λ°μ΄ν„° μ €μ¥ μ „λµ

| ν•­λ© | μ„¤λ… |
|-----------|------|
| **μ¤‘μ” μ΄λ²¤νΈ (μ…μ¥, κ²°μ )** | μ²λ¦¬ μ¦‰μ‹ DBμ— μ €μ¥ (νΈλμ­μ… μ μ©) |
| **λΉλ²ν• μ΄λ²¤νΈ (μ¥λ°”κµ¬λ‹ λ“±)** | λ©”λ¨λ¦¬ κ°μ²΄λ§ κ°±μ‹  ν›„, μΌμ • κ°„κ²©μΌλ΅ μΌκ΄„ μ €μ¥ (batch insert) |
| **μμ™Έ λ°μƒ μ‹** | νΈλμ­μ… rollbackμΌλ΅ λ°μ΄ν„° μ •ν•©μ„± μ μ§€ |


